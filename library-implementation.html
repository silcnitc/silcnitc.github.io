<!Doctype html>
<html lang="en">
    <head>
        <title>Library Implementation</title>
        <meta charset="UTF-8">
        <!--<link rel="stylesheet" href="css/bootstrap.min.css">-->
        <link rel="stylesheet" href="css/style_new.css">
        <script src="js/jquery-1.12.1.min.js" charset="utf-8"></script>
        <link rel="stylesheet" href="js/embed-2cd369fa1c0830bd3aa06c21d4f14a13e060d2d31bbaae740f4af4.css"><div id="gist28627206" class="gist">
        <link rel="stylesheet" href="js/embed-cbe5b40fa72b0964f90d4919c2da8f8f94d7c9f6c2aa49c07f6fa3.css"><div id="gist28627206" class="gist">
        <script src="js/bootstrap.min.js" charset="utf-8"></script>
    </head>
    <div class="container">
        <header id="navtop">
            <a href="index.html" class="logo fleft"><img src="img/logo.png" alt=""></a>
            <nav class="fright">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
        			    <li><a href="help.html">Help</a></li>
        			    <li><a href="roadmap.html">Roadmap</a></li>
        			    <li><a href="documentation.html" class="navactive">Documentation</a></li>
                </ul>
            </nav>
        </header>
        <body>
        <div class="Services-page main grid-wrap">
            <header class="grid col-full">
                <hr/>
                <p class="fleft">Library Implementation</p>
                <br>
                <br>
            </header>
            <aside class="grid col-one-quarter mq2-col-full sticky_sidebar" style="position: static;">
              <menu>
                <ul>
                  <li><a class="sec" href="#nav-introduction">Introduction</a></li>
                  <li><a class="sec" href="#nav-illustration">Illustration</a></li>
                </ul>
              </menu>
               <a class="button" href="">Download as PDF</a>
            </aside>
            <section class="grid col-three-quarters mq2-col-full">
                <div class="grid-wrap">
                <article class="grid col-full" id="nav-introduction">
                    <h2>Introduction</h2>
                    <p>
                        The ABI stipulates that the code for a <b>common shared library</b> must be linked to the address space of every program.  The library code must be linked to logical page 0 and logical page 1 of each program.  When an ExpL source program is compiled by an ExpL compiler, the compiler generates code containing calls to the library assuming the library functions will be "there" in the address space when the program is eventually loaded for execution.  It is the responsibility of the OS loader to do the actual loading of the library.  (In technical jargon, the library is said to be <b><i>linked at compile time</i></b> and <b><i>loaded at run time</i></b>.  Unfortunately, there is lack of agreement on terminology in these matters).
                    </p>
                    <p>
                        All calls to the library will be a CALL to logical address 0 of the address space.   The library code expects a function code and three arguments to have been pushed into the stack before the call by the application, as described <a href="abi.html#nav-eXpOS-system-library-interface" target="_blank">here</a>.
                    </p>
                    <p>
                        To implement the library, you must write code to implement the six library functions â€“ read, write, exit, Initialize, Alloc and Free.  Among these, read write and exit just involves calling the corresponding system calls using the low-level system call interface described <a href="abi.html#nav-lowlevel-syscall-interface" target="_blank">here</a>.  The code for the remaining three functions must be implemented in the library.
                    </p>
                    <p>
                        Initialize, Alloc and Free are <i>heap management functions</i>.  Each application program has a heap memory region which is attached to logical pages 2 and 3 of the address space.  The heap management functions support allocation and de-allocation of dynamic memory.   Initialize function initializes the heap data structures.  The library must contain code to allocate and de-allocate memory when requested by the application.  In the case of an allocation request, the address of the first memory address of the allocated memory must be returned.
                    </p>
                    <p>
                        Various dynamic memory allocation algorithms exist.   A very simple allocation policy would be to always allocate fixed sized memory blocks.  The following document discussed this simple allocation scheme and a more complex variable block allocation scheme called <a href="run_data_structures/heap.html#nav-buddy-allocation" target="_blank">Buddy System Allocation</a>.  In the project, you will be primarily implementing a fixed size allocator.   One of the exercises in the roadmap asks you to implement the buddy system allocator. 
                    </p>
                    <p>
                        The advantage of using a library for dynamic memory allocation is that this common code can be loaded by the OS during boot time at some memory and can be attached to the address space of every application, saving memory space.
                    </p>
                    <p>
                        <b>Note</b>:  The library implementation outline given below assumes that the application code does not modify the contents of the heap except memory allocated by a call to Alloc.  If the application code accesses code in the heap that was not allocated to it, the data structures set up by the library functions may get corrupted and the library functions may fail to work properly.
                    <p>
                        The following gives an outline of the library implementation.
                    </p>  
                </article>
            </section>
        </div>
    </div>
    </body>
    <footer class="center part clearfix">
            <ul class="social column3 fleft">
                <li><a href="https://github.com/silcnitc">Github</a></li>
            </ul>
          <div class="up column3 mright"> <a href="#navtop" class="ir">Go up</a> </div>
          <div class="up column3 mright"><p> Authors : <a href="https://www.linkedin.com/in/dattathallam">Thallam Sai Sree Datta</a>, <a href="https://www.linkedin.com/in/n-ruthviik-0a0539100">N Ruthvik</a></p> </div>
          <nav class="column3">
            <ul>
              <li><a href="index.html">Home</a></li>
              <li><a href="about.html">About</a></li>
              <li><a href="uc.html">Contact</a></li>
            </ul>
          </nav>
      </footer>
    <!-- Javascript - jQuery
    <script src="http://code.jquery.com/jquery.min.js"></script>-->
    <script>window.jQuery || document.write('<script src="js/jquery-1.7.2.min.js"><\/script>')</script>
    <!--[if (gte IE 6)&(lte IE 8)]>
    <script src="js/selectivizr.js"></script>
    <![endif]-->
    <script src="js/scripts.js"></script>
</html>